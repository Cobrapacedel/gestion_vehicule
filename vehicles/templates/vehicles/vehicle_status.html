{% extends "core/base.html" %}
{% load static %}
{% block title %}Detay Veyikil | {{ vehicle.plate_number }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-6 mt-8">

  <h1 class="text-2xl font-bold text-gray-800 mb-4">
    ğŸš— Detay sou Veyikil {{ vehicle.plate_number }}
  </h1>

  <!-- Infos principales -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-800">
    <p><strong>ID:</strong> {{ user.id }}</p>
    <p><strong>PwopriyetÃ¨:</strong> {{ user.first_name }} {{ user.last_name }}</p>
    <p><strong>ImÃ¨l:</strong> {{ user.email }}</p>
    <p><strong>TelefÃ²n:</strong> {{ user.profile.phone }}</p>
    <p><strong>AdrÃ¨s:</strong> {{ user.profile.address }}</p>
    <p><strong>Lisans #:</strong> {{ user.driver_license }}</p>
    <p><strong>Mak:</strong> {{ vehicle.brand }}</p>
    <p><strong>ModÃ¨l:</strong> {{ vehicle.model }}</p>
    <p><strong>Plak:</strong> {{ vehicle.plate_number }}</p>
    <p><strong>Kalite:</strong> {{ vehicle.vehicle_type|capfirst }}</p>
    <p><strong>Dat Anrejistreman:</strong> {{ vehicle.created_at|date:"d/m/Y H:i" }}</p>
    <p><strong>Estati:</strong>
      {% if vehicle.status == 'available' %}
        <span class="text-green-600 font-semibold">Aktif</span>
      {% elif vehicle.status == 'rented' %}
        <span class="text-gray-700 font-semibold">Lwaye</span>
      {% elif vehicle.status == 'sold' %}
        <span class="text-yellow-700 font-semibold">Vann</span>
      {% elif vehicle.status == 'transferred' %}
        <span class="text-blue-700 font-semibold">Transfere</span>
      {% else %}
        <span class="text-red-700 font-semibold">Nan Garaj</span>
      {% endif %}
    </p>
  </div>

  <hr class="my-6">

  <!-- Informations selon l'Ã©tat -->
  {% if vehicle.status == 'rented' and vehicle.renter %}
  <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
    <h2 class="font-semibold text-lg text-gray-800 mb-2">Lokasyon</h2>
    <p><strong>LokatÃ¨:</strong> {{ vehicle.renter.name }}</p>
    <p><strong>TelefÃ²n:</strong> {{ vehicle.renter.phone }}</p>
    <p><strong>AdrÃ¨s:</strong> {{ vehicle.renter.address }}</p>
    <p><strong>Dat Lokasyon:</strong> {{ vehicle.renter.created_at|date:"d/m/Y H:i" }}</p>
    <a href="{% url 'vehicles:rented_list' %}" 
       class="mt-3 inline-block bg-blue-600 text-white px-4 py-2 rounded font-semibold hover:bg-blue-700">
       ğŸ“œ Lis tout machin lwe yo
    </a>
  </div>

  {% elif vehicle.status == 'sold' and vehicle.seller %}
  <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
    <h2 class="font-semibold text-lg text-gray-800 mb-2">Vant</h2>
    <p><strong>Achte pa:</strong> {{ vehicle.seller.name }}</p>
    <p><strong>TelefÃ²n:</strong> {{ vehicle.seller.phone }}</p>
    <p><strong>AdrÃ¨s:</strong> {{ vehicle.seller.address }}</p>
    <p><strong>Dat Vant:</strong> {{ vehicle.seller.created_at|date:"d/m/Y H:i" }}</p>
    <a href="{% url 'vehicles:sold_list' %}" 
       class="mt-3 inline-block bg-yellow-600 text-white px-4 py-2 rounded font-semibold hover:bg-yellow-700">
       ğŸ’° Lis tout machin vann yo
    </a>
  </div>

  {% elif vehicle.status == 'transferred' and vehicle.transferred_to %}
  <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
    <h2 class="font-semibold text-lg text-gray-800 mb-2">TransfÃ¨</h2>
    <p><strong>Nouveau PropriÃ©tÃ¨:</strong> {{ vehicle.transferred_to.name }}</p>
    <p><strong>TelefÃ²n:</strong> {{ vehicle.transferred_to.phone }}</p>
    <p><strong>AdrÃ¨s:</strong> {{ vehicle.transferred_to.address }}</p>
    <p><strong>Dat TransfÃ¨:</strong> {{ vehicle.transferred_to.created_at|date:"d/m/Y H:i" }}</p>
    <a href="{% url 'vehicles:transferred_list' %}" 
       class="mt-3 inline-block bg-blue-600 text-white px-4 py-2 rounded font-semibold hover:bg-blue-700">
       ğŸ” Lis transfÃ¨ yo
    </a>
  </div>

  {% elif vehicle.status == 'garage' and vehicle.mechanic %}
  <div class="bg-red-50 p-4 rounded-lg border border-red-200">
    <h2 class="font-semibold text-lg text-gray-800 mb-2">Garaj</h2>
    <p><strong>ReparatÃ¨:</strong> {{ vehicle.mechanic.name }}</p>
    <p><strong>TelefÃ²n:</strong> {{ vehicle.mechanic.phone }}</p>
    <p><strong>AdrÃ¨s:</strong> {{ vehicle.mechanic.address }}</p>
    <p><strong>Dat Depo:</strong> {{ vehicle.mechanic.created_at|date:"d/m/Y H:i" }}</p>
    <a href="{% url 'vehicles:mechanic_list' %}" 
       class="mt-3 inline-block bg-red-600 text-white px-4 py-2 rounded font-semibold hover:bg-red-700">
       ğŸ”§ Lis machin nan garaj yo
    </a>
  </div>

  {% else %}
  <p class="text-gray-600 italic">Pa gen enfÃ²masyon adisyonÃ¨l pou estati sa a.</p>
  {% endif %}

  <!-- Actions -->
  <div class="flex justify-between mt-6">
    <a href="{% url 'vehicles:vehicles_list' %}" class="text-blue-600 hover:underline">â† Retounen nan lis</a>
  </div>
</div>
{% endblock %}
